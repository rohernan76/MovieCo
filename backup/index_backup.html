<!DOCTYPE html>
<html>
<head>
  <title>Retrieving data using Ajax+jQuery</title>
  <script   src="https://code.jquery.com/jquery-3.1.0.js"   integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="   crossorigin="anonymous"></script>
</head>
<body>

<h2 align="center">Manage checkout details</h2>
<table border="1" align="center">
   <tr>
       <td> <input type="button" id="display" value="Display sorted checkout data" /> </td>
   </tr>
</table>
<div id="responsecontainer" align="center">

</div>
</body>

 <script type="text/javascript">

// Write a function where it accepts a number and print it to screen with the answers //

function loadData() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
      getMostCheckout(xhttp);
    }
  };
  // $.get("http://159.203.175.239:8080/checkouts.txt", function(dataCheckOuts){
  xhttp.open("GET", "http://159.203.175.239:8080/checkouts.txt", true);
  xhttp.send();
}

function getMostCheckout (xml) {

      var c = dataCheckOuts.split("\n");
      var userArray = [];
      var user = {};
      var largest= 0;

      for(var i = 0; i < c.length; i++) {
        userArray.push(c[i].split(" ")[1]);
      }

      for (var j=0; j < userArray.length; j++){
        var current = userArray[j];
          if (user[current] === undefined) {
            user[current] = 1;
          } else {
            user[current] ++;
          }
          return (user);
      }          

          var max = 0;
          var maxUser;

        for (var k in user) {
          if (user[k] > max){
              max = user[k];
              maxUser = k;
          }
          return (maxUser);
        }
}
  // document.getElementById("display").innerHTML = table;



// var u = getMostCheckout(user18)

// var m = getMovieData(movie)


</script>


</html>